# CLIMATE CHANGE
#### Video Demo:  https://youtu.be/HOiJGKiQye0
#### A website that shows you how temperatures have changed in your area.

## LANGUAGES AND LIBRARIES

#### Back-end:

* Python
* Flask
* xarray
* json
* requests

#### Front-end:

* HTML
* CSS
* Javascript

#### API and other data formats:

* Google maps reverse geocoding
* Google maps Javascript API
* IP-API for geolocation
* Word bank global Co2 emissions JSON
* Berkeley Earth Temperature deviation NetCDF

## Back-end:

This was by far the most interesting part of the project for me to work out, on first instance the back-end collects the user's IP address and sends a request to [ip-api.com](https://ip-api.com/) to identify (roughly) the user location. A more accurate service could've been used to get a more precise location but I elected not to do that as such methods require the user to allow access and can be considered more intrusive in terms of privacy.

The program is able to identify a country and the coordinates the user is connecting from (again, roughly...) and uses these as arguments to interrogate a NetCDF file to calculate the temparature deviation in the area (more on this later) and by consulting a separate JSON file it also works out the amount of Co2 equivalent emissions the user's country has been responsible for in both 1990 and 2018 (the last year that the current database I'm referencing to has the most available data for the most countries).

These are then handed over to the HTML file that displays them in the 4 boxes below the map.

Upon moving and clicking on the map I used javaScript to automatically populate the form below the map that allows the user to update the location and its statistics to different countries, I decided for this process to be done manually rather than update the data manually as accessing the NetCDF file takes some time and causes the website to take a few seconds to update, I figured that if this process was automatic it could result in confusing behavious and generally a less user freindly experience.

Clicking on the confirmation button to move the location of the data sends a POST request to the same page that triggers a sligthly different process: Latitude and Longitude are collected from the form rather then derived from the IP address of course, from these the Country's name has to be derived from such coordinates. This is achived via Google reverse geoconding API that hands back a JSON with several parameters like country name and country code; these are used then in a similar way as the initial location to call functions that calculate temperature deviation and Co2 emissions again.

### NetCDF and temperature deviation database:

As mentioned above this was sourced from Berkeley Earth (please follow the link on the website), the real challenge was understanding how the data was stored in this format and how to access it, I found out there are numerous libraries in python to work with such files and I landed on xarray in particular, this was a great learning expereince and allowed me to dive deeper in n-dimensional arrays.

Upon collecting the User's location the algorithm I designed picks the last 12 measuerements (1 year) for each coordinate in a 5x5 "box" around the location and calculates an average of all values giving the user an average deviation for the last year in their area.

## Front-end:

Pretty standard Flask setup as I'm less well versed in front end and generally enjoy developing algorithms and back end more: the bones of the page are in a layout.htm file that contains most elements of the sidebar and the map up top, the various user interactions are in a file called index.html and once the user changes location a seperate html file called coord.html is called into action that adds a "Home" line to the sidenav to bring the user back to index.

An explainer page is also generated by the same method by clicking "What am I looking at?" on the top left of the page.

A Javascript file is also taking care of showing the map and the "bubble" info windwos displaying the selected coordinates on the map, it also habdles such coordinated and populates the form uppon clicking the map.


